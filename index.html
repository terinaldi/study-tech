<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"/>
  <title>Study Tech</title>
  <link rel="manifest" href="manifest.json"/>
  <meta name="theme-color" content="#8B0000"/>
  <!-- iOS support -->
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icon.png">
  <link rel="apple-touch-icon" sizes="512x512" href="icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Study Tech">
  <!-- Font Awesome 6 Free CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --primary: #8B0000;
      --accent: #A52A2A;
      --text: #0F0F0F;
      --text-secondary: #3C3C3C;
      --bg: #FAFAFA;
      --card: #FFFFFF;
      --border: #E2E2E2;
      --shadow-sm: 0 2px 10px rgba(0,0,0,0.07);
      --shadow-md: 0 8px 28px rgba(139,0,0,0.11);
      --safe-bottom-fallback: 48px;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100dvh;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI Variable", "Segoe UI", system-ui, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.78;
      font-size: 18px;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100dvh;
      padding-top: env(safe-area-inset-top);
      padding-bottom: calc(env(safe-area-inset-bottom) + var(--safe-bottom-fallback));
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      overscroll-behavior: contain;
    }

    header {
      background: linear-gradient(145deg, #6b0000 0%, #8B0000 50%, #a11212 100%);
      color: white;
      text-align: center;
      padding: calc(1.6rem + env(safe-area-inset-top)) 1rem 1.4rem; /* much thinner header */
      position: sticky;
      top: 0;
      z-index: 100;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.22);
    }

    header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 60%);
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      z-index: 0;
      pointer-events: none;
    }

    .header-content {
      position: relative;
      z-index: 1;
      padding-bottom: 0.3rem;
    }

    h1 {
      margin: 0;
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: -0.9px;
      line-height: 1.05;
      background: linear-gradient(90deg, #ffffff, #f0f0f0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }

    .subtitle {
      margin: 0.5rem 0 0;
      font-size: 1.05rem;
      font-weight: 400;
      opacity: 0.92;
      letter-spacing: 0.3px;
      color: rgba(255,255,255,0.95);
      text-shadow: 0 1px 4px rgba(0,0,0,0.3);
      animation: subtleShine 6s ease-in-out infinite;
    }

    @keyframes subtleShine {
      0% { opacity: 0.92; }
      50% { opacity: 1; }
      100% { opacity: 0.92; }
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 1.2rem 1rem calc(5rem + env(safe-area-inset-bottom));
    }

    h2 {
      color: var(--primary);
      font-size: 2.1rem;
      font-weight: 700;
      margin: 2.5rem 0 1.2rem;
      letter-spacing: -0.3px;
    }

    h3 {
      color: var(--accent);
      font-size: 1.7rem;
      font-weight: 650;
      margin: 2rem 0 1rem;
      letter-spacing: -0.15px;
    }

    .section-intro,
    p,
    li {
      font-size: 1.05rem;
      color: var(--text-secondary);
      margin: 1.2rem 0;
    }

    .page p,
    .page li {
      font-size: 1.08rem;
      line-height: 1.8;
    }

    .barrier-btn {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 1.3rem 1.5rem;
      margin: 1rem 0;
      background: var(--card);
      color: var(--text);
      border: none;
      border-radius: 16px;
      font-size: 1.35rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow-sm);
      transition: all 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .barrier-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }

    .btn-left {
      display: flex;
      align-items: center;
      gap: 1.1rem;
    }

    .btn-icon {
      font-size: 1.8rem;
      color: var(--primary);
      width: 40px;
      text-align: center;
      flex-shrink: 0;
    }

    .chevron {
      font-size: 2.3rem;
      color: #B0B0B0;
      font-weight: 300;
      line-height: 1;
    }

    .page {
      display: none;
      background: var(--card);
      margin: 1rem 0 2rem;
      padding: 2rem 1.6rem calc(3.5rem + env(safe-area-inset-bottom));
      border-radius: 20px;
      box-shadow: var(--shadow-md);
    }

    .mass-image-container {
      margin: 1.2rem 0;
      text-align: center;
    }

    .mass-image {
      max-width: 60%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      display: block;
      margin: 0 auto;
    }

    @media (max-width: 768px) {
      header {
        padding: calc(1.4rem + env(safe-area-inset-top)) 1rem 1.8rem;
      }
      h1 {
        font-size: 2.1rem;
        letter-spacing: -0.7px;
      }
      .subtitle {
        font-size: 0.98rem;
        margin-top: 0.4rem;
      }
      .mass-image {
        max-width: 85%; /* bigger on phone */
      }
      .container {
        padding: 1rem 0.9rem calc(5rem + env(safe-area-inset-bottom));
      }
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
      padding: 0.9rem 1.8rem;
      border-radius: 999px;
      font-size: 1.22rem;
      font-weight: 600;
      margin-bottom: 2rem;
      cursor: pointer;
      transition: all 0.25s ease;
    }

    .back-btn:hover {
      background: var(--primary);
      color: white;
    }

    #dict-section {
      background: var(--card);
      border-radius: 20px;
      padding: 2rem 1.6rem;
      box-shadow: var(--shadow-md);
      margin-top: 2.5rem;
    }

    .input-group {
      position: relative;
      margin: 1.4rem 0;
    }

    #word-input {
      width: 100%;
      padding: 1.3rem 4.2rem 1.3rem 1.5rem;
      font-size: 1.35rem;
      border: 2px solid var(--border);
      border-radius: 14px;
      transition: all 0.25s;
    }

    #word-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(139,0,0,0.09);
    }

    .clear-btn {
      position: absolute;
      right: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      font-size: 2rem;
      color: #888;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: none;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s;
    }

    .clear-btn:hover {
      color: var(--primary);
      background: rgba(139,0,0,0.07);
    }

    #level-select {
      width: 100%;
      padding: 1.2rem 1.4rem;
      font-size: 1.28rem;
      border: 2px solid var(--border);
      border-radius: 14px;
      background: white;
      margin-bottom: 1.4rem;
    }

    #search-btn {
      width: 100%;
      background: var(--primary);
      color: white;
      border: none;
      padding: 1.35rem;
      border-radius: 14px;
      font-size: 1.32rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(139,0,0,0.2);
      transition: all 0.25s ease;
    }

    #search-btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
    }

    #result {
      margin-top: 2.2rem;
      padding-bottom: 3rem;
    }

    .dict-word {
      font-size: 2.4rem;
      font-weight: 700;
      margin: 0 0 0.5rem;
      color: var(--text);
    }

    .phonetic {
      color: var(--text-secondary);
      font-size: 1.3rem;
    }

    .pos {
      font-weight: 700;
      color: var(--primary);
      text-transform: capitalize;
      font-size: 1.45rem;
      margin: 1.8rem 0 0.8rem;
      display: block;
    }

    .def-item {
      margin: 1.2rem 0;
      font-size: 1.12rem;
    }

    .example {
      color: var(--text-secondary);
      font-style: italic;
    }

    .origin {
      background: #FFF8F8;
      border-left: 5px solid var(--primary);
      padding: 1.2rem 1.5rem;
      margin: 1.8rem 0;
      border-radius: 10px;
      font-size: 1.05rem;
    }

    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      margin: 2.2rem 0;
      border-radius: 16px;
      box-shadow: var(--shadow-md);
    }

    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    ol, ul {
      padding-left: 1.8rem;
      margin: 1.4rem 0;
    }

    li {
      margin-bottom: 1rem;
      font-size: 1.08rem;
    }

    strong {
      color: var(--primary);
      font-weight: 600;
    }

    .footer-note {
      text-align: center;
      color: #666;
      font-size: 0.95rem;
      margin: 4.5rem 0 calc(5rem + env(safe-area-inset-bottom));
      padding-top: 2rem;
      border-top: 1px solid #EEE;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Study Tech</h1>
      <p class="subtitle">Master Learning with Proven Study Technology</p>
    </div>
  </header>

  <div class="container">
    <div id="main-content">
      <section>
        <h2>The Study Barriers</h2>
        <p class="section-intro">Tap each barrier to learn more about what can block effective study.</p>
        <button class="barrier-btn" onclick="showPage('intro')">
          <div class="btn-left">
            <i class="fa-solid fa-book-open btn-icon"></i>
            <span>Intro: The Barriers to Study</span>
          </div>
          <span class="chevron">›</span>
        </button>
        <button class="barrier-btn" onclick="showPage('mass')">
          <div class="btn-left">
            <i class="fa-solid fa-cube btn-icon"></i>
            <span>1. Absence of Mass</span>
          </div>
          <span class="chevron">›</span>
        </button>
        <button class="barrier-btn" onclick="showPage('gradient')">
          <div class="btn-left">
            <i class="fa-solid fa-chart-line btn-icon"></i>
            <span>2. Skipped Gradient</span>
          </div>
          <span class="chevron">›</span>
        </button>
        <button class="barrier-btn" onclick="showPage('word')">
          <div class="btn-left">
            <i class="fa-solid fa-question-circle btn-icon"></i>
            <span>3. Misunderstood Word</span>
          </div>
          <span class="chevron">›</span>
        </button>
      </section>

      <section>
        <h2>Word Clearing</h2>
        <button class="barrier-btn" onclick="showPage('why-clear')">
          <div class="btn-left">
            <i class="fa-solid fa-lightbulb btn-icon"></i>
            <span>Why Clear Your Words?</span>
          </div>
          <span class="chevron">›</span>
        </button>
        <button class="barrier-btn" onclick="showPage('how-to-clear')">
          <div class="btn-left">
            <i class="fa-solid fa-magnifying-glass btn-icon"></i>
            <span>How to Clear a Word</span>
          </div>
          <span class="chevron">›</span>
        </button>
        <button class="barrier-btn" onclick="showPage('help-another')">
          <div class="btn-left">
            <i class="fa-solid fa-users btn-icon"></i>
            <span>How to Help Another Clear Words</span>
          </div>
          <span class="chevron">›</span>
        </button>
      </section>

      <section id="study-tools">
        <h2>Study Tools</h2>
        <div id="dict-section">
          <h3>Built-in Dictionary</h3>
          <p>Simple lookup: definitions + origin/derivation when available.</p>

          <select id="level-select">
            <option value="beginner">Beginner / Elementary Level</option>
            <option value="intermediate" selected>Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>

          <div class="input-group">
            <input type="text" id="word-input" placeholder="Enter a word (e.g., epistemology)" />
            <button id="clear-btn" class="clear-btn">×</button>
          </div>

          <button id="search-btn">Look Up</button>
          <div id="result"></div>
        </div>
      </section>
    </div>

    <!-- Pages -->
    <div id="intro" class="page">
      <button class="back-btn" onclick="showPage('main')">← Back to Main</button>
      <h2>THE BARRIERS TO STUDY</h2>
      <p>Based on article "The Barriers to Study" by L. Ron Hubbard</p>
      <p>It has been discovered that there are three definite barriers which can block a person’s ability to study and thus his ability to be educated. These barriers actually produce physical and mental reactions.</p>
      <p>If one knows and understands what these barriers are and how to handle them, his ability to study and learn will be greatly increased.</p>
      <p>The Barriers to Study form the core basis of The Technology of Study®.</p>
      <div class="video-container">
        <iframe src="https://www.youtube.com/embed/M-iQD2B7ZjE?start=110" title="Study Technology Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
      <button class="back-btn" onclick="showPage('main')">← Back to Main</button>
    </div>

    <div id="mass" class="page">
      <button class="back-btn" onclick="showPage('main')">← Back to Main</button>
      <h2>The First Barrier to Study: Absence of Mass</h2>
      <p>If one is attempting to understand the function and operation of a car or a computer or a solar system, the printed page and spoken word are no substitute for the object itself.</p>
      <p>It would be difficult to understand how to use a computer for the first time if you did not have the computer there in front of you. In fact, lacking the object associated with a word can inhibit all understanding (I think we can agree here that attempting to study how an aircraft flies and the various parts of an aircraft, without ever seeing or touching an aircraft, or a reasonable mock-up of one, would make a successful study of it pretty much impossible).</p>
      
      <div class="mass-image-container">
        <img src="pics/mass1.png" alt="Illustration of Absence of Mass - physical object needed" class="mass-image">
      </div>

      <p>If the mass of a subject is absent, you can actually feel squashed. It can make you feel bent, sort of spinny, sort of dead, or bored. A person studying a subject without the objects related to that subject, will experience these and several other specific reactions.</p>
      
      <div class="mass-image-container">
        <img src="pics/mass2.png" alt="Physical sensations when mass is absent" class="mass-image">
      </div>

      <p>Knowing how to identify and handle these reactions is vital to a student's ability to grasp and use a subject - and more than vital to a teacher's ability to get a student to learn the subject.</p>
      
      <button class="back-btn" onclick="showPage('main')">← Back to Main</button>
    </div>

    <!-- The other pages are unchanged in this snippet for brevity, but keep them as in your previous version -->

  </div>

  <div class="footer-note">
    Powered by L. Ron Hubbard’s Study Technology • Designed for focused, high-performance learning
  </div>

  <script>
    // Your existing script remains unchanged
    let currentWord = '';

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(el => el.style.display = 'none');
      document.getElementById('main-content').style.display = 'none';
      if (pageId === 'main') {
        document.getElementById('main-content').style.display = 'block';
      } else {
        document.getElementById(pageId).style.display = 'block';
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    showPage('main');

    async function lookupWord() {
      const word = document.getElementById('word-input').value.trim().toLowerCase();
      if (!word) return;
      currentWord = word;
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = '<p style="text-align:center; color:#777; padding:2.5rem 0;">Loading...</p>';
      const level = document.getElementById('level-select').value;
      try {
        const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
        if (!res.ok) throw new Error('Not found');
        const data = await res.json();
        const entry = data[0];
        let html = `<h3 class="dict-word">${entry.word}${entry.phonetic ? ` <span class="phonetic">/${entry.phonetic}/</span>` : ''}</h3>`;
        if (entry.origin && entry.origin.trim()) {
          html += `<div class="origin"><strong>Origin / Derivation:</strong><br>${entry.origin}</div>`;
        }
        entry.meanings.forEach(meaning => {
          const pos = meaning.partOfSpeech.charAt(0).toUpperCase() + meaning.partOfSpeech.slice(1);
          html += `<div class="pos">${pos}</div>`;
          let defs = meaning.definitions;
          if (level === 'beginner') {
            defs = defs.filter(def => def.definition.length <= 60);
            if (defs.length > 1) defs = defs.slice(0, 1);
          } else if (level === 'intermediate') {
            defs = defs.filter(def => def.definition.length <= 120);
            if (defs.length > 3) defs = defs.slice(0, 3);
          }
          defs.forEach((def, index) => {
            html += `<p class="def-item">${index + 1}. ${def.definition}`;
            if (def.example) html += ` <span class="example">Example: ${def.example}</span>`;
            html += `</p>`;
          });
        });
        resultDiv.innerHTML = html;
      } catch (err) {
        resultDiv.innerHTML = '<p style="color:var(--primary); text-align:center; padding:2.5rem 0; font-size:1.15rem;">Word not found or offline.<br>Please check spelling and try again.</p>';
      }
    }

    document.getElementById('search-btn').addEventListener('click', lookupWord);
    document.getElementById('word-input').addEventListener('keypress', e => {
      if (e.key === 'Enter') lookupWord();
    });
    document.getElementById('level-select').addEventListener('change', () => {
      if (currentWord) lookupWord();
    });

    const wordInput = document.getElementById('word-input');
    const clearBtn = document.getElementById('clear-btn');
    wordInput.addEventListener('input', () => {
      clearBtn.style.display = wordInput.value.trim() ? 'flex' : 'none';
    });
    clearBtn.addEventListener('click', () => {
      wordInput.value = '';
      clearBtn.style.display = 'none';
      document.getElementById('result').innerHTML = '';
      currentWord = '';
      wordInput.focus();
    });

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(() => {});
      });
    }
  </script>
</body>
</html>
